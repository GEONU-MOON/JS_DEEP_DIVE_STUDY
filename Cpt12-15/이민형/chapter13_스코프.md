## 13장 스코프

### 13.1 스코프란?

스코프(scrope): 유효 범위

모든 식별자는 사진이 선언된 위치에 의해 다른 코드가 식별자 자신을 참조할 수 있는 유효 범위가 결정된다. ➡️ 이것이 스코프

- 식별자 결정: 이름이 같은 두 개의 변수 중에서 어떤 변수를 참조해야 할 것인지 결정

- 스코프는 식별자는 검색할 때 사용하는 규칙

_렉시컬 환경: 코드가 어디서 실행되며 주변에 어떤 코드가 있는지_

**스코프는 네임스페이스이다.**

<hr>

### 13.2 스코프의 종류

- 전역: 코드의 가장 바깥 영역 ➡️ 전역 스코프

  - 전역 변수는 어디서든지 참조 가능

- 지역: 함수 몸체 내부 ➡️ 지역 스코프

  - 자신의 지역 스코프와 하위 지역 스코프에서 유효

<hr>

### 13.3 스코프 체인

스코프도 중첩될 수 있다. ➡️ 스코프도 계층적 구조를 갖는다.

➡️ 스코프가 계층적으로 연결된 것을 **스코프 체인**이라 한다.

- 변수 참조 시

  - 스코프 체인을 통해 변수를 참조하는 코드의 스코프에서 시작

  - 상위 스코프 방향으로 이동하며 선언된 변수 검색

  - 상위 스코프에서 선언한 변수를 하위 스코프에서도 참조 가능

_스코프 체인은 물리적인 실체로 존재_

변수 검색은 변수를 참조하는 코드의 스코프에서 시작해서 상위 스코프 방향으로만 이동

- 함수 참조 시

  - 함수도 식별자에 할당되기 때문에 스코프를 가짐

```javascript
function foo() {
  console.log("global function foo");
}

function bar() {
  function foo() {
    console.log("local function foo");
  }
  foo(); // 식별자 foo 검색
}

bar();
```

<hr>

### 13.4 함수 레벨 스코프

- 함수 레벨 스코프: 코드 블록이 아닌 함수에 의해서만 지역 스코프가 생성

- 블록 레벨 스코프: 모든 코드 블록(if, for, while, try/catch)이 지역 스코프를 생성

- var 키워드는 함수 레벨 스코프
  - var 키워드로 선언된 변수는 코드 블록 내에서 선언되었어도 모두 전역 변수이다.

<hr>

### 13.5 렉시컬 스코프

- 동적 스코프: 함수를 어디서 호출했는지에 따라 함수의 상위 스코프 결정

- 렉시컬 스코프 or 정적 스코프: 함수를 어디서 정의했는지에 따라 함수의 상위 스코프 결정

```javascript
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
} // 전역에서 정의된 함수

foo(); // ?
bar(); // ?
```

자바스크립트는 렉시컬 스코프를 따른다. ➡️ 함수를 어디서 정의했는지에 따라 함수의 상위 스코프 결정 ➡️ 함수의 호출 위치는 상위 스코프 결정에 어떠한 영향도 주지 않는다.

➡️ 함수의 상위 스코프는 언제나 자신이 정의된 스코프

- 렉시컬 스코프를 따르므로 함수의 상위 스코프는 함수 정의가 실행될 때 정적으로 결정

<hr>
